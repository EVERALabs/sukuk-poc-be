basePath: /api/v1
definitions:
  internal_handlers.APIError:
    properties:
      code:
        type: integer
      details:
        type: string
      message:
        type: string
    type: object
  internal_handlers.APIResponse:
    properties:
      data: {}
      error:
        $ref: '#/definitions/internal_handlers.APIError'
      message:
        type: string
      success:
        type: boolean
    type: object
  internal_handlers.CompanyResponse:
    properties:
      data:
        description: models.Company or []models.Company
      meta:
        $ref: '#/definitions/internal_handlers.Pagination'
      success:
        type: boolean
    type: object
  internal_handlers.CreateCompanyRequest:
    properties:
      description:
        type: string
      email:
        type: string
      industry:
        type: string
      name:
        type: string
      wallet_address:
        type: string
      website:
        type: string
    required:
    - email
    - name
    - wallet_address
    type: object
  internal_handlers.CreateSukukRequest:
    properties:
      company_id:
        type: integer
      description:
        type: string
      is_redeemable:
        type: boolean
      maturity_date:
        type: string
      max_investment:
        type: string
      min_investment:
        type: string
      name:
        type: string
      payment_frequency:
        type: integer
      symbol:
        type: string
      total_supply:
        type: string
      yield_rate:
        type: number
    required:
    - company_id
    - maturity_date
    - min_investment
    - name
    - symbol
    - total_supply
    - yield_rate
    type: object
  internal_handlers.InvestmentResponse:
    properties:
      data:
        description: models.Investment or []models.Investment
      meta:
        $ref: '#/definitions/internal_handlers.Pagination'
      success:
        type: boolean
    type: object
  internal_handlers.Pagination:
    properties:
      count:
        type: integer
      has_next:
        type: boolean
      has_previous:
        type: boolean
      page:
        type: integer
      per_page:
        type: integer
      total:
        type: integer
      total_pages:
        type: integer
    type: object
  internal_handlers.SukukResponse:
    properties:
      data:
        description: models.Sukuk or []models.Sukuk
      meta:
        $ref: '#/definitions/internal_handlers.Pagination'
      success:
        type: boolean
    type: object
  internal_handlers.SystemResponse:
    properties:
      data: {}
      success:
        type: boolean
    type: object
  internal_handlers.UpdateCompanyRequest:
    properties:
      description:
        type: string
      email:
        type: string
      industry:
        type: string
      is_active:
        type: boolean
      name:
        type: string
      website:
        type: string
    type: object
  internal_handlers.UpdateSukukRequest:
    properties:
      description:
        type: string
      name:
        type: string
      outstanding_supply:
        type: string
      status:
        type: string
      token_address:
        type: string
      total_supply:
        type: string
    type: object
  internal_handlers.UploadResponse:
    properties:
      filename:
        type: string
      message:
        type: string
      success:
        type: boolean
      url:
        type: string
    type: object
host: localhost:8080
info:
  contact:
    email: support@sukuk-poc.com
    name: API Support
    url: http://www.sukuk-poc.com/support
  description: A Web3 backend for Sukuk (Islamic bonds) on Base Testnet, providing
    APIs for dApps and frontends while processing blockchain events from an indexer.
  license:
    name: MIT
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  termsOfService: http://swagger.io/terms/
  title: Sukuk POC Backend API
  version: "1.0"
paths:
  /admin/companies:
    post:
      consumes:
      - application/json
      description: Create a new partner company (Admin only)
      parameters:
      - description: Company data
        in: body
        name: company
        required: true
        schema:
          $ref: '#/definitions/internal_handlers.CreateCompanyRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Company created successfully
          schema:
            $ref: '#/definitions/internal_handlers.CompanyResponse'
        "400":
          description: Invalid request data
          schema:
            $ref: '#/definitions/internal_handlers.APIResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/internal_handlers.APIResponse'
      security:
      - ApiKeyAuth: []
      summary: Create a new company
      tags:
      - Admin
  /admin/companies/{id}:
    put:
      consumes:
      - application/json
      description: Update company details (Admin only)
      parameters:
      - description: Company ID
        in: path
        name: id
        required: true
        type: integer
      - description: Updated company data
        in: body
        name: company
        required: true
        schema:
          $ref: '#/definitions/internal_handlers.UpdateCompanyRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Company updated successfully
          schema:
            $ref: '#/definitions/internal_handlers.CompanyResponse'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/internal_handlers.APIResponse'
        "404":
          description: Company not found
          schema:
            $ref: '#/definitions/internal_handlers.APIResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/internal_handlers.APIResponse'
      security:
      - ApiKeyAuth: []
      summary: Update company
      tags:
      - Admin
  /admin/companies/{id}/upload-logo:
    post:
      consumes:
      - multipart/form-data
      description: Upload logo image for a company (Admin only)
      parameters:
      - description: Company ID
        in: path
        name: id
        required: true
        type: integer
      - description: Logo image file (PNG, JPG, JPEG, max 5MB)
        in: formData
        name: file
        required: true
        type: file
      produces:
      - application/json
      responses:
        "200":
          description: Logo uploaded successfully
          schema:
            $ref: '#/definitions/internal_handlers.UploadResponse'
        "400":
          description: Invalid file or company ID
          schema:
            $ref: '#/definitions/internal_handlers.APIResponse'
        "404":
          description: Company not found
          schema:
            $ref: '#/definitions/internal_handlers.APIResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/internal_handlers.APIResponse'
      security:
      - ApiKeyAuth: []
      summary: Upload company logo
      tags:
      - Admin
  /admin/redemptions/pending:
    get:
      consumes:
      - application/json
      description: Get all pending redemption requests across all sukuk series (Admin
        only)
      produces:
      - application/json
      responses:
        "200":
          description: List of pending redemptions
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      security:
      - ApiKeyAuth: []
      summary: Get pending redemptions
      tags:
      - Admin
  /admin/sukuks:
    post:
      consumes:
      - application/json
      description: Create a new Sukuk series with off-chain data (admin only)
      parameters:
      - description: Sukuk series data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_handlers.CreateSukukRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Sukuk series created
          schema:
            $ref: '#/definitions/internal_handlers.SukukResponse'
        "400":
          description: Bad request
          schema:
            $ref: '#/definitions/internal_handlers.APIResponse'
        "422":
          description: Validation error
          schema:
            $ref: '#/definitions/internal_handlers.APIResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/internal_handlers.APIResponse'
      security:
      - ApiKeyAuth: []
      summary: Create new Sukuk series
      tags:
      - Sukuk Management
  /admin/sukuks/{id}:
    put:
      consumes:
      - application/json
      description: Update existing Sukuk series off-chain data (admin only)
      parameters:
      - description: Sukuk Series ID
        in: path
        name: id
        required: true
        type: integer
      - description: Update data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_handlers.UpdateSukukRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Sukuk series updated
          schema:
            $ref: '#/definitions/internal_handlers.SukukResponse'
        "400":
          description: Bad request
          schema:
            $ref: '#/definitions/internal_handlers.APIResponse'
        "404":
          description: Sukuk series not found
          schema:
            $ref: '#/definitions/internal_handlers.APIResponse'
        "422":
          description: Validation error
          schema:
            $ref: '#/definitions/internal_handlers.APIResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/internal_handlers.APIResponse'
      security:
      - ApiKeyAuth: []
      summary: Update Sukuk series
      tags:
      - Sukuk Management
  /admin/sukuks/{id}/upload-prospectus:
    post:
      consumes:
      - multipart/form-data
      description: Upload PDF prospectus file for a Sukuk series (admin only)
      parameters:
      - description: Sukuk Series ID
        in: path
        name: id
        required: true
        type: integer
      - description: PDF prospectus file
        in: formData
        name: file
        required: true
        type: file
      produces:
      - application/json
      responses:
        "200":
          description: Prospectus uploaded
          schema:
            $ref: '#/definitions/internal_handlers.UploadResponse'
        "400":
          description: Bad request
          schema:
            $ref: '#/definitions/internal_handlers.APIResponse'
        "404":
          description: Sukuk series not found
          schema:
            $ref: '#/definitions/internal_handlers.APIResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/internal_handlers.APIResponse'
      security:
      - ApiKeyAuth: []
      summary: Upload Sukuk prospectus
      tags:
      - Sukuk Management
  /admin/system/force-sync:
    post:
      consumes:
      - application/json
      description: Manually trigger blockchain event synchronization
      produces:
      - application/json
      responses:
        "200":
          description: Sync triggered
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      security:
      - ApiKeyAuth: []
      summary: Force blockchain sync
      tags:
      - Admin
  /admin/system/sync-status:
    get:
      consumes:
      - application/json
      description: Get the current blockchain synchronization status and last processed
        event
      produces:
      - application/json
      responses:
        "200":
          description: Sync status
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      security:
      - ApiKeyAuth: []
      summary: Get blockchain sync status
      tags:
      - Admin
  /admin/yields/distributions:
    get:
      consumes:
      - application/json
      description: Get yield distribution summary grouped by distribution date (Admin
        only)
      produces:
      - application/json
      responses:
        "200":
          description: Yield distribution summary
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      security:
      - ApiKeyAuth: []
      summary: Get yield distributions
      tags:
      - Admin
  /admin/yields/pending:
    get:
      consumes:
      - application/json
      description: Get all pending yield claims across all sukuk series (Admin only)
      produces:
      - application/json
      responses:
        "200":
          description: List of pending yields
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      security:
      - ApiKeyAuth: []
      summary: Get pending yields
      tags:
      - Admin
  /companies:
    get:
      consumes:
      - application/json
      description: Get a list of all active companies
      parameters:
      - description: Filter by industry sector
        in: query
        name: sector
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: List of companies
          schema:
            $ref: '#/definitions/internal_handlers.CompanyResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/internal_handlers.APIResponse'
      summary: List all companies
      tags:
      - Companies
  /companies/{id}:
    get:
      consumes:
      - application/json
      description: Get details of a specific company including its Sukuk series
      parameters:
      - description: Company ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Company details
          schema:
            $ref: '#/definitions/internal_handlers.CompanyResponse'
        "400":
          description: Invalid company ID
          schema:
            $ref: '#/definitions/internal_handlers.APIResponse'
        "404":
          description: Company not found
          schema:
            $ref: '#/definitions/internal_handlers.APIResponse'
      summary: Get company details
      tags:
      - Companies
  /companies/{id}/sukuks:
    get:
      consumes:
      - application/json
      description: Get all Sukuk series for a specific company
      parameters:
      - description: Company ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: List of company's Sukuk series
          schema:
            $ref: '#/definitions/internal_handlers.SukukResponse'
        "400":
          description: Invalid company ID
          schema:
            $ref: '#/definitions/internal_handlers.APIResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/internal_handlers.APIResponse'
      summary: Get company's Sukuk series
      tags:
      - Companies
  /health:
    get:
      consumes:
      - application/json
      description: Get overall system health including database and sync status
      produces:
      - application/json
      responses:
        "200":
          description: System health
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      summary: Get system health
      tags:
      - System
  /investments:
    get:
      consumes:
      - application/json
      description: Get a list of investments with optional filtering by investor,
        sukuk series, and status
      parameters:
      - description: Filter by investor address
        in: query
        name: investor_address
        type: string
      - description: Filter by sukuk ID
        in: query
        name: sukuk_id
        type: string
      - description: Filter by investment status
        in: query
        name: status
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: List of investments
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      summary: List investments
      tags:
      - Investments
  /investments/{investor_address}:
    get:
      consumes:
      - application/json
      description: Get all investments for a specific investor address
      parameters:
      - description: Investor Ethereum address
        in: path
        name: investor_address
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: List of investor's investments
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid address
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      summary: Get investments by investor
      tags:
      - Investments
  /investments/{investor_address}/portfolio:
    get:
      consumes:
      - application/json
      description: Get portfolio summary including active investments, total value,
        and performance metrics
      parameters:
      - description: Investor Ethereum address
        in: path
        name: investor_address
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Portfolio summary
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid address
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      summary: Get investor portfolio summary
      tags:
      - Investments
  /investments/company/{company_id}:
    get:
      consumes:
      - application/json
      description: Get all investments for sukuk series issued by a specific company
      parameters:
      - description: Company ID
        in: path
        name: company_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: List of company's investments
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid company ID
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      summary: Get investments by company
      tags:
      - Investments
  /redemptions:
    get:
      consumes:
      - application/json
      description: Get a list of redemption requests with optional filtering by investor,
        sukuk series, and status
      parameters:
      - description: Filter by investor address
        in: query
        name: investor_address
        type: string
      - description: Filter by sukuk ID
        in: query
        name: sukuk_id
        type: string
      - description: Filter by redemption status
        in: query
        name: status
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: List of redemptions
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      summary: List redemptions
      tags:
      - Redemptions
  /redemptions/{investor_address}:
    get:
      consumes:
      - application/json
      description: Get redemption history for a specific investor address
      parameters:
      - description: Investor Ethereum address
        in: path
        name: investor_address
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: List of investor's redemptions
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid address
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      summary: Get redemptions by investor
      tags:
      - Redemptions
  /redemptions/company/{company_id}:
    get:
      consumes:
      - application/json
      description: Get all redemption requests for sukuk series issued by a specific
        company
      parameters:
      - description: Company ID
        in: path
        name: company_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: List of company's redemptions
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid company ID
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      summary: Get redemptions by company
      tags:
      - Redemptions
  /redemptions/sukuk/{sukuk_id}:
    get:
      consumes:
      - application/json
      description: Get all redemption requests for a specific sukuk series
      parameters:
      - description: Sukuk ID
        in: path
        name: sukuk_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: List of sukuk's redemptions
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid sukuk ID
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      summary: Get redemptions by sukuk
      tags:
      - Redemptions
  /sukuks:
    get:
      consumes:
      - application/json
      description: Get a list of all Sukuk series with optional filtering by company
        and status
      parameters:
      - description: Company ID to filter by
        in: query
        name: company_id
        type: string
      - description: Status to filter by (active, paused, matured)
        in: query
        name: status
        type: string
      - description: 'Page number (default: 1)'
        in: query
        name: page
        type: integer
      - description: 'Items per page (default: 20)'
        in: query
        name: per_page
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: List of Sukuk series
          schema:
            $ref: '#/definitions/internal_handlers.SukukResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/internal_handlers.APIResponse'
      summary: List all Sukuk series
      tags:
      - Sukuk Series
  /sukuks/{id}:
    get:
      consumes:
      - application/json
      description: Get detailed information about a specific Sukuk series including
        company, investments, yield claims, and redemptions
      parameters:
      - description: Sukuk Series ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Sukuk series details
          schema:
            $ref: '#/definitions/internal_handlers.SukukResponse'
        "400":
          description: Invalid ID
          schema:
            $ref: '#/definitions/internal_handlers.APIResponse'
        "404":
          description: Sukuk series not found
          schema:
            $ref: '#/definitions/internal_handlers.APIResponse'
      summary: Get Sukuk series details
      tags:
      - Sukuk Series
  /sukuks/{id}/holders:
    get:
      consumes:
      - application/json
      description: Get a list of current active investors holding the specified Sukuk
        series
      parameters:
      - description: Sukuk Series ID
        in: path
        name: id
        required: true
        type: integer
      - description: 'Page number (default: 1)'
        in: query
        name: page
        type: integer
      - description: 'Items per page (default: 20)'
        in: query
        name: per_page
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: List of active investments
          schema:
            $ref: '#/definitions/internal_handlers.InvestmentResponse'
        "400":
          description: Invalid ID
          schema:
            $ref: '#/definitions/internal_handlers.APIResponse'
        "404":
          description: Sukuk series not found
          schema:
            $ref: '#/definitions/internal_handlers.APIResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/internal_handlers.APIResponse'
      summary: Get Sukuk holders
      tags:
      - Sukuk Series
  /sukuks/{id}/metrics:
    get:
      consumes:
      - application/json
      description: Get performance metrics including total investors, investment amount,
        pending yields, and redemptions
      parameters:
      - description: Sukuk Series ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Sukuk series metrics
          schema:
            $ref: '#/definitions/internal_handlers.SystemResponse'
        "400":
          description: Invalid ID
          schema:
            $ref: '#/definitions/internal_handlers.APIResponse'
        "404":
          description: Sukuk series not found
          schema:
            $ref: '#/definitions/internal_handlers.APIResponse'
      summary: Get Sukuk series metrics
      tags:
      - Sukuk Series
  /yields:
    get:
      consumes:
      - application/json
      description: Get a list of yield distributions and claims with optional filtering
      parameters:
      - description: Filter by investor address
        in: query
        name: investor_address
        type: string
      - description: Filter by sukuk ID
        in: query
        name: sukuk_id
        type: string
      - description: Filter by claim status (pending, claimed)
        in: query
        name: status
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: List of yields
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      summary: List yields
      tags:
      - Yields
  /yields/{investor_address}:
    get:
      consumes:
      - application/json
      description: Get yield distribution and claim history for a specific investor
        address
      parameters:
      - description: Investor Ethereum address
        in: path
        name: investor_address
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: List of investor's yields
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid address
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      summary: Get yields by investor
      tags:
      - Yields
  /yields/company/{company_id}:
    get:
      consumes:
      - application/json
      description: Get all yield distributions for sukuk series issued by a specific
        company
      parameters:
      - description: Company ID
        in: path
        name: company_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: List of company's yields
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid company ID
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      summary: Get yields by company
      tags:
      - Yields
  /yields/sukuk/{sukuk_id}:
    get:
      consumes:
      - application/json
      description: Get all yield distributions for a specific sukuk series
      parameters:
      - description: Sukuk ID
        in: path
        name: sukuk_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: List of sukuk's yields
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid sukuk ID
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      summary: Get yields by sukuk
      tags:
      - Yields
securityDefinitions:
  ApiKeyAuth:
    description: API key for accessing protected admin endpoints
    in: header
    name: X-API-Key
    type: apiKey
swagger: "2.0"
