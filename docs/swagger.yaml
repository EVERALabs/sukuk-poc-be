basePath: /api/v1
definitions:
  handlers.OwnedSukukResponse:
    properties:
      address:
        type: string
      sukuk:
        items:
          $ref: '#/definitions/models.SukukMetadataListResponse'
        type: array
      total_count:
        type: integer
    type: object
  handlers.RiwayatResponse:
    properties:
      activities:
        items:
          $ref: '#/definitions/models.ActivityEvent'
        type: array
      address:
        type: string
      total_count:
        type: integer
    type: object
  models.ActivityEvent:
    properties:
      address:
        description: Buyer or User address
        type: string
      amount:
        description: Token amount
        type: string
      sukuk_address:
        description: Sukuk contract address
        type: string
      sukuk_code:
        description: Sukuk symbol/code (e.g., "SITI")
        type: string
      sukuk_title:
        description: Sukuk name/title
        type: string
      timestamp:
        description: Event timestamp
        type: string
      tx_hash:
        description: Transaction hash
        type: string
      type:
        description: '"purchase" or "redemption_request"'
        type: string
    type: object
  models.IndexerTableInfo:
    properties:
      event_type:
        type: string
      hash_prefix:
        type: string
      last_updated:
        type: string
      row_count:
        type: integer
      table_name:
        type: string
    type: object
  models.IndexerTablesResponse:
    properties:
      available_events:
        items:
          type: string
        type: array
      latest_tables:
        additionalProperties:
          type: string
        description: event_type -> table_name mapping
        type: object
      tables:
        items:
          $ref: '#/definitions/models.IndexerTableInfo'
        type: array
      total_tables:
        type: integer
    type: object
  models.PortfolioResponse:
    properties:
      address:
        type: string
      holdings:
        items:
          $ref: '#/definitions/models.SukukHolding'
        type: array
      summary:
        $ref: '#/definitions/models.PortfolioSummary'
      total_holdings:
        type: integer
      total_value:
        description: Total portfolio value in USD/base currency
        type: string
    type: object
  models.PortfolioSummary:
    properties:
      active_sukuk_count:
        description: Sukuk with non-zero balance
        type: integer
      matured_sukuk_count:
        description: Sukuk that have matured
        type: integer
      total_claimable_yield:
        type: string
      total_sukuk_count:
        type: integer
      total_yield_claimed:
        type: string
    type: object
  models.RedemptionListResponse:
    properties:
      redemptions:
        items:
          $ref: '#/definitions/models.RedemptionRequest'
        type: array
      status_counts:
        additionalProperties:
          type: integer
        description: 'requested: 5, approved: 2, etc.'
        type: object
      total_count:
        type: integer
    type: object
  models.RedemptionRequest:
    properties:
      amount:
        type: string
      approval_block:
        type: integer
      approval_id:
        type: string
      approval_time:
        type: string
      approval_tx_hash:
        type: string
      approved_amount:
        type: string
      can_approve:
        type: boolean
      metadata:
        allOf:
        - $ref: '#/definitions/models.SukukMetadata'
        description: Metadata for UI/Business Logic
      payment_token:
        type: string
      request_block:
        type: integer
      request_id:
        description: Request Information
        type: string
      request_time:
        type: string
      request_tx_hash:
        type: string
      requires_manager_auth:
        type: boolean
      status:
        allOf:
        - $ref: '#/definitions/models.RedemptionStatus'
        description: Status and Approval Information
      sukuk_address:
        type: string
      total_supply:
        type: string
      user:
        type: string
    type: object
  models.RedemptionStatsResponse:
    properties:
      approved_requests:
        type: integer
      by_sukuk:
        additionalProperties:
          $ref: '#/definitions/models.RedemptionSukukStats'
        description: By Sukuk breakdown
        type: object
      pending_requests:
        type: integer
      total_approved_amount:
        type: string
      total_requested_amount:
        type: string
      total_requests:
        type: integer
    type: object
  models.RedemptionStatus:
    enum:
    - requested
    - approved
    - rejected
    - completed
    type: string
    x-enum-varnames:
    - RedemptionStatusRequested
    - RedemptionStatusApproved
    - RedemptionStatusRejected
    - RedemptionStatusCompleted
  models.RedemptionSukukStats:
    properties:
      approved_amount:
        type: string
      request_count:
        type: integer
      requested_amount:
        type: string
      sukuk_address:
        type: string
      sukuk_code:
        type: string
    type: object
  models.SukukHolding:
    properties:
      balance:
        description: Current token balance
        type: string
      claimable_yield:
        description: Available yield to claim
        type: string
      last_activity:
        description: Last purchase/redemption
        type: string
      metadata:
        allOf:
        - $ref: '#/definitions/models.SukukMetadata'
        description: Sukuk details
      sukuk_address:
        type: string
      total_yield_claimed:
        description: Total yield claimed historically
        type: string
      unclaimed_distribution_ids:
        description: Distribution IDs available for claiming
        items:
          type: integer
        type: array
      yield_history:
        description: Recent yield distributions
        items:
          $ref: '#/definitions/models.YieldDistribution'
        type: array
    type: object
  models.SukukMetadata:
    properties:
      block_number:
        type: integer
      contract_address:
        description: Onchain Data
        type: string
      created_at:
        description: Timestamps
        type: string
      id:
        description: Primary Key
        type: integer
      imbal_hasil:
        description: 6.55% / Tahun
        type: string
      jatuh_tempo:
        description: 10 Jun 2030
        type: string
      kuota_nasional:
        description: Rp7,000,000,000,000
        type: number
      kupon_pertama:
        description: 11 Agustus 2025
        type: string
      logo_url:
        description: Logo link
        type: string
      maksimum_pembelian:
        description: Rp10,000,000,000
        type: number
      metadata_ready:
        description: Metadata Status
        type: boolean
      minimum_pembelian:
        description: Rp1,000,000
        type: number
      owner_address:
        type: string
      penerimaan_kupon:
        description: Bulanan
        type: string
      periode_pembelian:
        description: Ketentuan SR022-T5
        type: string
      status:
        description: Berlangsung
        type: string
      sukuk_code:
        description: Basic Info
        type: string
      sukuk_deskripsi:
        description: Description
        type: string
      sukuk_title:
        description: Sukuk Ritel
        type: string
      tanggal_bayar_kupon:
        description: 10 Setiap Bulan
        type: string
      tenor:
        description: Main Features
        type: string
      tipe_kupon:
        description: Fixed Rate
        type: string
      token_id:
        type: integer
      transaction_hash:
        type: string
      updated_at:
        type: string
    type: object
  models.SukukMetadataCreateRequest:
    properties:
      block_number:
        type: integer
      contract_address:
        description: Onchain Data
        type: string
      imbal_hasil:
        type: string
      jatuh_tempo:
        type: string
      kuota_nasional:
        type: number
      kupon_pertama:
        type: string
      logo_url:
        type: string
      maksimum_pembelian:
        type: number
      minimum_pembelian:
        type: number
      owner_address:
        type: string
      penerimaan_kupon:
        type: string
      periode_pembelian:
        description: Ketentuan
        type: string
      status:
        type: string
      sukuk_code:
        description: Basic Info
        type: string
      sukuk_deskripsi:
        type: string
      sukuk_title:
        type: string
      tanggal_bayar_kupon:
        type: string
      tenor:
        description: Main Features
        type: string
      tipe_kupon:
        type: string
      token_id:
        type: integer
      transaction_hash:
        type: string
    required:
    - contract_address
    - owner_address
    - sukuk_code
    - token_id
    type: object
  models.SukukMetadataListResponse:
    properties:
      block_number:
        type: integer
      contract_address:
        type: string
      created_at:
        type: string
      id:
        type: integer
      imbal_hasil:
        type: string
      jatuh_tempo:
        type: string
      kuota_nasional:
        type: number
      kupon_pertama:
        type: string
      latest_activities:
        items:
          $ref: '#/definitions/models.ActivityEvent'
        type: array
      logo_url:
        type: string
      maksimum_pembelian:
        type: number
      metadata_ready:
        type: boolean
      minimum_pembelian:
        type: number
      owner_address:
        type: string
      penerimaan_kupon:
        type: string
      periode_pembelian:
        type: string
      status:
        type: string
      sukuk_code:
        type: string
      sukuk_deskripsi:
        type: string
      sukuk_title:
        type: string
      tanggal_bayar_kupon:
        type: string
      tenor:
        type: string
      tipe_kupon:
        type: string
      token_id:
        type: integer
      transaction_hash:
        type: string
      updated_at:
        type: string
    type: object
  models.SukukMetadataResponse:
    properties:
      block_number:
        type: integer
      contract_address:
        type: string
      created_at:
        type: string
      id:
        type: integer
      imbal_hasil:
        type: string
      jatuh_tempo:
        type: string
      kuota_nasional:
        type: number
      kupon_pertama:
        type: string
      logo_url:
        type: string
      maksimum_pembelian:
        type: number
      metadata_ready:
        type: boolean
      minimum_pembelian:
        type: number
      owner_address:
        type: string
      penerimaan_kupon:
        type: string
      periode_pembelian:
        type: string
      status:
        type: string
      sukuk_code:
        type: string
      sukuk_deskripsi:
        type: string
      sukuk_title:
        type: string
      tanggal_bayar_kupon:
        type: string
      tenor:
        type: string
      tipe_kupon:
        type: string
      token_id:
        type: integer
      transaction_hash:
        type: string
      updated_at:
        type: string
    type: object
  models.SukukMetadataUpdateRequest:
    properties:
      imbal_hasil:
        type: string
      jatuh_tempo:
        type: string
      kuota_nasional:
        type: number
      kupon_pertama:
        type: string
      logo_url:
        type: string
      maksimum_pembelian:
        type: number
      minimum_pembelian:
        type: number
      penerimaan_kupon:
        type: string
      periode_pembelian:
        description: Ketentuan
        type: string
      status:
        type: string
      sukuk_deskripsi:
        type: string
      sukuk_title:
        description: Basic Info
        type: string
      tanggal_bayar_kupon:
        type: string
      tenor:
        description: Main Features
        type: string
      tipe_kupon:
        type: string
    type: object
  models.TransactionEvent:
    properties:
      amount:
        type: string
      block_number:
        type: integer
      details:
        additionalProperties: true
        description: Additional event-specific data
        type: object
      status:
        description: '"pending", "confirmed", "failed"'
        type: string
      sukuk_address:
        type: string
      timestamp:
        type: string
      tx_hash:
        type: string
      type:
        description: '"purchase", "redemption", "yield_claim", "yield_distribution"'
        type: string
    type: object
  models.TransactionHistoryResponse:
    properties:
      address:
        type: string
      total_count:
        type: integer
      transactions:
        items:
          $ref: '#/definitions/models.TransactionEvent'
        type: array
    type: object
  models.YieldClaimDetail:
    properties:
      claimable_amount:
        type: string
      distribution_count:
        type: integer
      last_distribution:
        type: string
      metadata:
        $ref: '#/definitions/models.SukukMetadata'
      sukuk_address:
        type: string
      unclaimed_distribution_ids:
        description: Distribution IDs available for claiming
        items:
          type: integer
        type: array
      user_balance:
        type: string
    type: object
  models.YieldClaimsResponse:
    properties:
      address:
        type: string
      claims:
        items:
          $ref: '#/definitions/models.YieldClaimDetail'
        type: array
      total_amount:
        description: Total claimable across all sukuk
        type: string
      total_claims:
        type: integer
    type: object
  models.YieldDistribution:
    properties:
      amount:
        type: string
      block_number:
        type: integer
      distribution_id:
        description: Required for claiming yields
        type: integer
      id:
        type: string
      sukuk_address:
        type: string
      timestamp:
        type: string
      tx_hash:
        type: string
    type: object
host: backend-sukuk.kadzu.dev
info:
  contact:
    email: support@sukuk-poc.com
    name: API Support
    url: http://www.sukuk-poc.com/support
  description: A Web3 backend for Sukuk (Islamic bonds) on Base Testnet, providing
    APIs for dApps and frontends while processing blockchain events from an indexer.
  license:
    name: MIT
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  termsOfService: http://swagger.io/terms/
  title: Sukuk POC Backend API
  version: "1.0"
paths:
  /admin/system/force-sync:
    post:
      consumes:
      - application/json
      description: Manually trigger blockchain event synchronization
      produces:
      - application/json
      responses:
        "200":
          description: Sync triggered
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      security:
      - ApiKeyAuth: []
      summary: Force blockchain sync
      tags:
      - Admin
  /admin/system/sync-status:
    get:
      consumes:
      - application/json
      description: Get the current blockchain synchronization status and last processed
        event
      produces:
      - application/json
      responses:
        "200":
          description: Sync status
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      security:
      - ApiKeyAuth: []
      summary: Get blockchain sync status
      tags:
      - Admin
  /debug/indexer:
    get:
      consumes:
      - application/json
      description: Test connection to indexer database and query sample data
      parameters:
      - description: Sukuk address to test
        in: query
        name: address
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Debug information
          schema:
            additionalProperties: true
            type: object
      summary: Debug indexer connection
      tags:
      - Debug
  /debug/indexer-tables:
    get:
      consumes:
      - application/json
      description: Get all discovered hash-prefixed indexer tables with metadata and
        row counts
      produces:
      - application/json
      responses:
        "200":
          description: Discovered indexer tables
          schema:
            $ref: '#/definitions/models.IndexerTablesResponse'
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: List indexer tables
      tags:
      - debug
  /debug/indexer-tables/{table_name}:
    get:
      consumes:
      - application/json
      description: Get detailed information about a specific indexer table including
        column structure
      parameters:
      - description: Table name
        example: '"f243__sukuk_purchase"'
        in: path
        name: table_name
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Table details
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid table name
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Table not found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Get table details
      tags:
      - debug
  /debug/indexer-tables/prefix/{hash_prefix}:
    get:
      consumes:
      - application/json
      description: Get all tables that share the same hash prefix (deployment)
      parameters:
      - description: Hash prefix
        example: '"f243"'
        in: path
        name: hash_prefix
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Tables with hash prefix
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid hash prefix
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Get tables by hash prefix
      tags:
      - debug
  /debug/indexer-tables/validate:
    get:
      consumes:
      - application/json
      description: Validate that all discovered indexer tables have expected columns
      produces:
      - application/json
      responses:
        "200":
          description: Validation results
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Validate indexer tables
      tags:
      - debug
  /health:
    get:
      consumes:
      - application/json
      description: Get overall system health including database and sync status
      produces:
      - application/json
      responses:
        "200":
          description: System health
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      summary: Get system health
      tags:
      - System
  /owned-sukuk/{address}:
    get:
      consumes:
      - application/json
      description: Get all sukuk metadata for sukuk tokens owned by a specific wallet
        address
      parameters:
      - description: User wallet address
        example: '"0xf57093Ea18E5CfF6E7bB3bb770Ae9C492277A5a9"'
        in: path
        name: address
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Owned sukuk metadata
          schema:
            $ref: '#/definitions/handlers.OwnedSukukResponse'
        "400":
          description: Invalid address
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Get sukuk owned by address
      tags:
      - owned-sukuk
  /portfolio/{address}:
    get:
      consumes:
      - application/json
      description: Get complete portfolio showing all sukuk holdings with current
        balances and claimable yields
      parameters:
      - description: User wallet address
        example: '"0xf57093Ea18E5CfF6E7bB3bb770Ae9C492277A5a9"'
        in: path
        name: address
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: User portfolio with holdings
          schema:
            $ref: '#/definitions/models.PortfolioResponse'
        "400":
          description: Invalid address
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Get user portfolio
      tags:
      - portfolio
  /redemptions:
    get:
      consumes:
      - application/json
      description: Get all redemption requests with their approval status, supports
        pagination
      parameters:
      - default: 50
        description: Number of redemptions to return
        in: query
        maximum: 200
        minimum: 1
        name: limit
        type: integer
      - default: 0
        description: Number of redemptions to skip
        in: query
        minimum: 0
        name: offset
        type: integer
      - description: Filter by status
        enum:
        - requested
        - approved
        - rejected
        - completed
        in: query
        name: status
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: List of redemptions with status
          schema:
            $ref: '#/definitions/models.RedemptionListResponse'
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Get all redemptions
      tags:
      - redemptions
  /redemptions/{request_id}:
    get:
      consumes:
      - application/json
      description: Get detailed information about a specific redemption request
      parameters:
      - description: Redemption request ID
        in: path
        name: request_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Redemption details
          schema:
            $ref: '#/definitions/models.RedemptionRequest'
        "400":
          description: Invalid request ID
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Redemption not found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Get redemption by ID
      tags:
      - redemptions
  /redemptions/stats:
    get:
      consumes:
      - application/json
      description: Get comprehensive statistics about all redemptions
      produces:
      - application/json
      responses:
        "200":
          description: Redemption statistics
          schema:
            $ref: '#/definitions/models.RedemptionStatsResponse'
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Get redemption statistics
      tags:
      - redemptions
  /redemptions/sukuk/{sukuk_address}:
    get:
      consumes:
      - application/json
      description: Get all redemption requests and approvals for a specific sukuk
      parameters:
      - description: Sukuk contract address
        example: '"0x02ba44871BD555d6ebD541e2820796F9b88cBF75"'
        in: path
        name: sukuk_address
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Sukuk's redemptions
          schema:
            $ref: '#/definitions/models.RedemptionListResponse'
        "400":
          description: Invalid sukuk address
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Get sukuk redemptions
      tags:
      - redemptions
  /redemptions/user/{address}:
    get:
      consumes:
      - application/json
      description: Get all redemption requests and approvals for a specific user
      parameters:
      - description: User wallet address
        example: '"0xf57093Ea18E5CfF6E7bB3bb770Ae9C492277A5a9"'
        in: path
        name: address
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: User's redemptions
          schema:
            $ref: '#/definitions/models.RedemptionListResponse'
        "400":
          description: Invalid address
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Get user redemptions
      tags:
      - redemptions
  /sukuk-metadata:
    get:
      consumes:
      - application/json
      description: Get all sukuk metadata with optional filtering by ready status
        and latest 10 blockchain activities
      parameters:
      - description: Filter by metadata_ready status
        enum:
        - "true"
        - "false"
        example: "true"
        in: query
        name: ready
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: List of sukuk metadata with activities
          schema:
            items:
              $ref: '#/definitions/models.SukukMetadataListResponse'
            type: array
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: List sukuk metadata with activities
      tags:
      - sukuk-metadata
    post:
      consumes:
      - application/json
      description: Create new sukuk with onchain and offchain metadata
      parameters:
      - description: Sukuk metadata
        in: body
        name: sukuk
        required: true
        schema:
          $ref: '#/definitions/models.SukukMetadataCreateRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/models.SukukMetadataResponse'
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Create sukuk metadata
      tags:
      - sukuk-metadata
  /sukuk-metadata/{id}:
    get:
      consumes:
      - application/json
      description: Get a single sukuk metadata by ID with latest 10 blockchain activities
      parameters:
      - description: Sukuk metadata ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Sukuk metadata with activities
          schema:
            $ref: '#/definitions/models.SukukMetadataListResponse'
        "400":
          description: Invalid ID format
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Sukuk metadata not found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Get sukuk metadata by ID
      tags:
      - sukuk-metadata
    put:
      consumes:
      - application/json
      description: Update existing sukuk metadata with offchain business information
        like tenor, imbal hasil, kuota nasional, etc. All fields are optional for
        partial updates. Onchain data (contract address, transaction hash, etc.) is
        preserved.
      parameters:
      - description: Sukuk metadata ID
        example: 36
        in: path
        name: id
        required: true
        type: integer
      - description: Offchain metadata to update
        in: body
        name: sukuk
        required: true
        schema:
          $ref: '#/definitions/models.SukukMetadataUpdateRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Updated sukuk metadata with both onchain and offchain data
          schema:
            $ref: '#/definitions/models.SukukMetadataResponse'
        "400":
          description: Invalid request payload or ID format
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Sukuk metadata not found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Failed to update sukuk metadata
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Update sukuk metadata with offchain business data
      tags:
      - sukuk-metadata
  /sukuk-metadata/{id}/ready:
    put:
      consumes:
      - application/json
      description: Mark sukuk metadata as ready for public display. Only sukuk with
        metadata_ready=true will appear in filtered API responses. Use this after
        adding all required offchain metadata.
      parameters:
      - description: Sukuk metadata ID
        example: 36
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Sukuk metadata marked as ready
          schema:
            $ref: '#/definitions/models.SukukMetadataResponse'
        "400":
          description: Invalid ID format
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Sukuk metadata not found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Failed to update sukuk metadata
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Mark sukuk metadata as ready
      tags:
      - sukuk-metadata
  /sukuk-metadata/{id}/unready:
    put:
      consumes:
      - application/json
      description: Mark sukuk metadata as unready (metadata_ready=false). This removes
        it from public API responses filtered by ready=true. Useful for taking sukuk
        offline for maintenance or updates.
      parameters:
      - description: Sukuk metadata ID
        example: 36
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Sukuk metadata marked as unready
          schema:
            $ref: '#/definitions/models.SukukMetadataResponse'
        "400":
          description: Invalid ID format
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Sukuk metadata not found
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Failed to update sukuk metadata
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Mark sukuk metadata as unready
      tags:
      - sukuk-metadata
  /sukuk-metadata/sync:
    post:
      consumes:
      - application/json
      description: Manually sync metadata for a specific sukuk from indexer
      parameters:
      - description: Token ID
        in: query
        name: tokenId
        required: true
        type: integer
      - description: Contract Address
        in: query
        name: contractAddress
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Trigger sukuk metadata sync
      tags:
      - sukuk-metadata
  /sukuk-metadata/tables:
    get:
      consumes:
      - application/json
      description: Get all available sukuk creation tables from the indexer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: List sukuk creation tables
      tags:
      - sukuk-metadata
  /transaction-history/{address}:
    get:
      consumes:
      - application/json
      description: Get all blockchain activities (purchases and redemptions) for a
        specific user address
      parameters:
      - description: User wallet address
        example: '"0xf57093Ea18E5CfF6E7bB3bb770Ae9C492277A5a9"'
        in: path
        name: address
        required: true
        type: string
      - default: 50
        description: Number of activities to retrieve
        example: 20
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Transaction history
          schema:
            $ref: '#/definitions/handlers.RiwayatResponse'
        "400":
          description: Invalid address or limit
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Get transaction history by address
      tags:
      - transaction-history
  /transactions/{address}:
    get:
      consumes:
      - application/json
      description: Get complete transaction history including purchases, redemptions,
        and yield claims
      parameters:
      - description: User wallet address
        example: '"0xf57093Ea18E5CfF6E7bB3bb770Ae9C492277A5a9"'
        in: path
        name: address
        required: true
        type: string
      - default: 50
        description: Number of transactions to return
        in: query
        maximum: 200
        minimum: 1
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Transaction history
          schema:
            $ref: '#/definitions/models.TransactionHistoryResponse'
        "400":
          description: Invalid address or parameters
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Get transaction history
      tags:
      - transactions
  /yield-claims/{address}:
    get:
      consumes:
      - application/json
      description: Get all available yield claims across user's sukuk holdings
      parameters:
      - description: User wallet address
        example: '"0xf57093Ea18E5CfF6E7bB3bb770Ae9C492277A5a9"'
        in: path
        name: address
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Available yield claims
          schema:
            $ref: '#/definitions/models.YieldClaimsResponse'
        "400":
          description: Invalid address
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Get available yield claims
      tags:
      - portfolio
  /yield-distributions/{sukuk_address}:
    get:
      consumes:
      - application/json
      description: Get yield distribution history for a specific sukuk
      parameters:
      - description: Sukuk contract address
        in: path
        name: sukuk_address
        required: true
        type: string
      - default: 20
        description: Number of distributions to return
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Yield distributions
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid parameters
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Get yield distributions
      tags:
      - portfolio
schemes:
- https
- http
securityDefinitions:
  ApiKeyAuth:
    description: API key for accessing protected admin endpoints
    in: header
    name: X-API-Key
    type: apiKey
swagger: "2.0"
